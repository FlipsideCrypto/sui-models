version: 2

models:
version: 2

models:
  - name: defi__ez_bridge_activity
    description: "{{ doc('defi__ez_bridge_activity') }}"
    config:
      contract:
        enforced: false
    columns:
      - name: CHECKPOINT_NUMBER
        description: "{{ doc('checkpoint_number') }}"
        data_type: NUMBER
        tests:
          - not_null
      - name: BLOCK_TIMESTAMP
        description: "{{ doc('block_timestamp') }}"
        data_type: TIMESTAMP_NTZ
        tests:
          - not_null
      - name: TX_DIGEST
        description: "{{ doc('tx_digest') }}"
        data_type: VARCHAR
        tests:
          - not_null
      - name: TX_SENDER
        description: "{{ doc('tx_sender') }}"
        data_type: VARCHAR
      - name: EVENT_INDEX
        description: "{{ doc('event_index') }}"
        data_type: NUMBER
        tests:
          - not_null
      - name: bridge_address
        description: "{{ doc('ez_bridge_activity_bridge_address') }}"
        data_type: VARCHAR
        tests:
          - not_null
      - name: platform
        description: "{{ doc('ez_bridge_activity_platform') }}"
        data_type: VARCHAR
        tests:
          - not_null
      - name: protocol
        description: "{{ doc('ez_bridge_activity_protocol') }}"
        data_type: VARCHAR
        tests:
          - not_null
      - name: protocol_version
        description: "{{ doc('ez_bridge_activity_protocol_version') }}"
        data_type: VARCHAR
      - name: direction
        description: "{{ doc('ez_bridge_activity_direction') }}"
        data_type: VARCHAR
        tests:
          - not_null
      - name: source_chain
        description: "{{ doc('ez_bridge_activity_source_chain') }}"
        data_type: VARCHAR
      - name: destination_chain
        description: "{{ doc('ez_bridge_activity_destination_chain') }}"
        data_type: VARCHAR
      - name: sender
        description: "{{ doc('ez_bridge_activity_sender') }}"
        data_type: VARCHAR
      - name: receiver
        description: "{{ doc('ez_bridge_activity_receiver') }}"
        data_type: VARCHAR
      - name: coin_type
        description: "{{ doc('coin_type') }}"
        data_type: VARCHAR
      - name: symbol
        description: "{{ doc('symbol') }}"
        data_type: VARCHAR
      - name: amount_unadj
        description: "{{ doc('ez_bridge_activity_amount_unadj') }}"
        data_type: NUMBER
      - name: amount
        description: "{{ doc('ez_bridge_activity_amount') }}"
        data_type: NUMBER
      - name: amount_usd
        description: "{{ doc('ez_bridge_activity_amount_usd') }}"
        data_type: NUMBER
      - name: token_is_verified
        description: "{{ doc('token_is_verified') }}"
        data_type: BOOLEAN
      - name: ez_bridge_activity_id
        description: "{{ doc('ez_bridge_activity_id') }}"
        data_type: VARCHAR
        tests:
          - not_null
          - unique
      
  - name: defi__ez_dex_swaps
    description: "{{ doc('defi__ez_dex_swaps') }}"
    tests:
      - dbt_utils.recency:
          datepart: hour
          field: block_timestamp
          interval: 6

    columns:
      - name: CHECKPOINT_NUMBER
        description: "{{ doc('checkpoint_number') }}"
        tests:
          - not_null
      - name: BLOCK_TIMESTAMP
        description: "{{ doc('block_timestamp') }}"
        tests:
          - not_null
      - name: TX_DIGEST
        description: "{{ doc('tx_digest') }}"
        tests:
          - not_null
      - name: EVENT_INDEX
        description: "{{ doc('event_index') }}"
        tests:
          - not_null
      - name: PLATFORM_ADDRESS
        description: "{{ doc('platform_address') }}"
        tests:
          - not_null
      - name: PLATFORM_NAME
        description: "{{ doc('platform_name') }}"
        tests:
          - not_null
      - name: POOL_ADDRESS
        description: "{{ doc('pool_address') }}"
      - name: POOL_NAME
        description: "{{ doc('pool_name') }}"
      - name: AMOUNT_IN_RAW
        description: "{{ doc('amount_in_raw') }}"
        tests:
          - not_null
      - name: AMOUNT_OUT_RAW
        description: "{{ doc('amount_out_raw') }}"
        tests:
          - not_null
      - name: A_TO_B
        description: "{{ doc('a_to_b') }}"
      - name: FEE_AMOUNT_RAW
        description: "{{ doc('fee_amount_raw') }}"
      - name: PARTNER_ADDRESS
        description: "{{ doc('partner_address') }}"
      - name: STEPS
        description: "{{ doc('steps') }}"
      - name: TOKEN_IN_TYPE
        description: "{{ doc('token_in_type') }}"
        tests:
          - not_null
      - name: TOKEN_IN_ADDRESS
        description: "{{ doc('token_in_address') }}"
      - name: TOKEN_IN_SYMBOL
        description: "{{ doc('token_in_symbol') }}"
      - name: TOKEN_IN_NAME
        description: "{{ doc('token_in_name') }}"
      - name: TOKEN_OUT_TYPE
        description: "{{ doc('token_out_type') }}"
      - name: TOKEN_OUT_ADDRESS
        description: "{{ doc('token_out_address') }}"
        tests:
          - not_null
      - name: TOKEN_OUT_SYMBOL
        description: "{{ doc('token_out_symbol') }}"
      - name: TOKEN_OUT_NAME
        description: "{{ doc('token_out_name') }}"
      - name: AMOUNT_IN
        description: "{{ doc('amount_in') }}"
      - name: AMOUNT_OUT
        description: "{{ doc('amount_out') }}"
      - name: FEE_AMOUNT
        description: "{{ doc('fee_amount') }}"
      - name: TOKEN_IN_PRICE
        description: "{{ doc('token_in_price') }}"
      - name: TOKEN_OUT_PRICE
        description: "{{ doc('token_out_price') }}"
      - name: TOKEN_IN_DECIMALS
        description: "{{ doc('token_in_decimals') }}"
      - name: TOKEN_OUT_DECIMALS
        description: "{{ doc('token_out_decimals') }}"
      - name: AMOUNT_IN_USD
        description: "{{ doc('amount_in_usd') }}"
      - name: AMOUNT_OUT_USD
        description: "{{ doc('amount_out_usd') }}"
      - name: SWAP_VOLUME_USD
        description: "{{ doc('swap_volume_usd') }}"
      - name: TRADER_ADDRESS
        description: "{{ doc('trader_address') }}"
        tests:
          - not_null
      - name: EZ_DEX_SWAPS_ID
        description: "{{ doc('dex_swaps_id') }}"
        tests:
          - not_null
          - unique
      - name: INSERTED_TIMESTAMP
        description: "{{ doc('inserted_timestamp') }}"
      - name: MODIFIED_TIMESTAMP
        description: "{{ doc('modified_timestamp') }}"
      - name: _INVOCATION_ID
        description: "{{ doc('_invocation_id') }}"
